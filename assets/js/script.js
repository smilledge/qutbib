function contributorForm(a){var b=a.filter(":checked").val();if(b=="individual"){a.closest(".contrib-form").find(".corporate").filter(":first").addClass("invisible");a.closest(".contrib-form").find(".individual").filter(":first").removeClass("invisible");a.closest(".contrib-form").find(".settings").filter(":first").html("Author")}else{a.closest(".contrib-form").find(".individual").filter(":first").addClass("invisible");a.closest(".contrib-form").find(".corporate").filter(":first").removeClass("invisible");a.closest(".contrib-form").find(".settings").filter(":first").html("Corp. Author")}}function contributorSettings(a){var b=a.filter(":checked").val();var c=a.parent().parent().next(".author-type");if(b=="author"){if(c.hasClass("invisible")==true){c.removeClass("invisible")}}else{a.closest(".drop-menu-content").children(".author-type").find("input:radio[name^='author-type'][value=individual]").trigger("click");if(c.hasClass("invisible")==false){c.addClass("invisible")}}a.closest(".contrib-form").find(".settings").filter(":first").html(b.capitalize())}function addContributor(){var a='<div class="left" style="margin-top:39px;"><a href="remove" class="remove-button"><div class="remove"></div>Remove</a></div>';var b=$(".contrib-form").filter(":first").clone(true).append(a);var b=b;var c="["+count+"]";b.find(":input").attr("name",function(a,b){var d=b.replace(/(\[.*?\])/g,"");return d+c});$(".contrib-wrapper").append(b);b.find("input[type=text]").val("");b.find('input:radio[name^="contributor-type"][value=author]').trigger("click");b.find('input:radio[name^="author-type"][value=individual]').trigger("click");count++}var count=1;$(document).ready(function(){$("form")[0].reset();$.ajaxSetup({cache:false});$(".drop-menu a").live("click",function(a){if($(this).next(".drop-menu-content").is(":visible")){a.preventDefault();$(".drop-menu-content").slideUp();$(".drop-menu a").removeClass("drop-menu-selected");$(this).toggleClass("down-arrow");$(this).toggleClass("down-arrow-selected")}else{$(document).trigger("mouseup");a.preventDefault();$(this).next(".drop-menu-content").slideToggle();$(this).toggleClass("drop-menu-selected");$(this).toggleClass("down-arrow");$(this).toggleClass("down-arrow-selected")}});$(".drop-menu-content").mouseup(function(){return false});$(document).mouseup(function(a){a.preventDefault();if($(a.target).parent(".drop-menu").length==0){$(".drop-menu a").removeClass("drop-menu-selected");$(".drop-menu-content").hide();$(".drop-menu a").addClass("down-arrow");$(".drop-menu a").removeClass("down-arrow-selected")}});$('input[name^="contributor-type"]').live("change",function(){var a=$(this);contributorSettings(a)});$('input[name^="author-type"]').live("change",function(){var a=$(this);contributorForm(a)});$('.contrib-wrapper a[href="remove"]').live("click",function(a){a.preventDefault();$(this).closest(".contrib-form").remove()});$("#add-contrib").live("click",function(){addContributor()});$("input[name=unusual-resource-check]").bind("click",function(){$("#unusual-resource-wrapper").slideToggle("fast",function(){$("select[name=resource-type]").val("");$("#publication-title-wrapper").slideToggle("fast")})});$("input[name=doi-check]").bind("click",function(){$("#doi-wrapper").slideToggle("fast",function(){$("input[name=doi]").val("")})});$(".reference").hoverIntent(function(){$(this).find(".overlay").fadeToggle()},function(){$(this).find(".overlay").fadeToggle()});$t=$("body");$("#loading-overlay").css({opacity:.9,top:$t.offset().top,width:$t.outerWidth(),height:$t.outerHeight()});$("#img-load").css({top:$t.height()/2,left:$t.width()/2});$('a[href="#intext"]').click(function(a){a.preventDefault();$(this).closest(".reference").children(".msg-intext").show();$(".msg-overlay").fadeIn()});$('a[href="#msg-share"]').click(function(a){a.preventDefault();$(this).next(".msg-share").show();$(".msg-overlay").fadeIn()});$('a[href="#msg-close"]').click(function(a){a.preventDefault();$(this).parent().hide();$(".msg-overlay").fadeOut()});$('a[class="delete-ref"]').click(function(a){a.preventDefault();$("#loading-overlay").fadeIn();var b=$(this);var c=$(this).attr("href");b.closest(".reference").slideUp();$.get(c,function(a){$("#loading-overlay").fadeOut()})})});String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}